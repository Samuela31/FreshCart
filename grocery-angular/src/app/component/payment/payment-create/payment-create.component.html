<div class="container my-5">
  <h2 class="mb-4">Payment Details</h2>

  <form (ngSubmit)="submitPayment()" novalidate>
    <div class="mb-3">
      <label>Cardholder Name</label>
      <input
        type="text"
        class="form-control"
        [(ngModel)]="payment.cardholderName"
        name="cardholderName"
        required
      />
    </div>

    <div class="mb-3">
      <label>Card Number</label>
      <input
        type="text"
        class="form-control"
        [(ngModel)]="payment.cardNumber"
        name="cardNumber"
        maxlength="16"
        required
      />
    </div>

    <div class="row">
      <div class="col-md-4 mb-3">
        <label>Expiry Month</label>
        <input
          type="text"
          class="form-control"
          [(ngModel)]="payment.expiryMonth"
          name="expiryMonth"
          maxlength="2"
          required
        />
      </div>
      <div class="col-md-4 mb-3">
        <label>Expiry Year</label>
        <input
          type="text"
          class="form-control"
          [(ngModel)]="payment.expiryYear"
          name="expiryYear"
          maxlength="2"
          required
        />
      </div>
      <div class="col-md-4 mb-3">
        <label>CVV</label>
        <input
          type="password"
          class="form-control"
          [(ngModel)]="payment.cvv"
          name="cvv"
          maxlength="3"
          required
        />
      </div>
    </div>

    <div class="mb-3">
      <label>OTP (for verification)</label>
      <input
        type="text"
        class="form-control"
        [(ngModel)]="payment.otp"
        name="otp"
        maxlength="6"
        required
      />
    </div>

    <div class="mb-3">
      <label class="form-label">Delivery Address</label>
      <textarea
        class="form-control"
        [(ngModel)]="deliveryAddress"
        name="deliveryAddress"
        rows="3"
        placeholder="Enter full delivery address"
        required
      ></textarea>
    </div>

    <div class="mb-3">
      <h5>Total Amount: {{ totalAmount | currency : "INR" }}</h5>
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <button type="submit" class="btn btn-success w-100" [disabled]="loading">
      {{ loading ? "Processing Payment..." : "Pay Now" }}
    </button>
  </form>

  <div *ngIf="orderId" class="alert alert-success mt-4">
    Payment Successful! Your order has been placed successfully.
    <br />
    <strong>Order ID:</strong> {{ orderId }} <br />
    <strong>Total Billed:</strong> {{ totalAmount | currency : "INR" }}
    <strong>Delivery Address:</strong> {{ deliveryAddress }}
  </div>
</div>
