<div class="container mt-4" *ngIf="!loading">
  <h3 class="mb-4">My Orders ({{ orders.length }})</h3>

  <div *ngIf="orders.length === 0" class="alert alert-info">
    No orders found for your account ({{ userEmail }}).
  </div>

  <div *ngFor="let order of orders" class="card mb-4 shadow-sm">
    <div class="card-header bg-primary text-white">
      <strong>Order ID: {{ order.orderId }}</strong> | Status:
      <span class="badge bg-light text-dark">{{ order.orderStatus }}</span>
    </div>

    <div class="card-body">
      <p>
        <strong>Order Date:</strong> {{ order.orderDate | date : "medium" }}
      </p>
      <p><strong>Delivery Address:</strong> {{ order.deliveryAddress }}</p>

      <h5 class="mt-3">Items:</h5>
      <table class="table table-sm table-striped table-bordered">
        <thead class="table-light">
          <tr>
            <th>Product</th>
            <th>Unit Price</th>
            <th>Quantity</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of order.orderItems">
            <td>{{ item.product?.productName }}</td>
            <td>{{ item.productPrice | currency : "INR" }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.subTotal | currency : "INR" }}</td>
          </tr>
        </tbody>
      </table>

      <div class="d-flex justify-content-end">
        <h5>
          Total:
          <span class="text-success">{{
            order.totalAmount | currency : "INR"
          }}</span>
        </h5>
      </div>
    </div>
  </div>
</div>

<div *ngIf="loading" class="text-center mt-5">
  <div class="spinner-border text-primary" role="status"></div>
  <p class="mt-2">Loading your orders...</p>
</div>
