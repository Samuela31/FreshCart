<div class="container my-4">
  <!-- CREATE NEW PROMOTION FORM -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-primary text-white">
      <h5>Create New Category Promotion</h5>
    </div>
    <div class="card-body">
      <form
        #promoForm="ngForm"
        (ngSubmit)="createPromotion(promoForm)"
        novalidate
      >
        <div class="row g-3">
          <div class="col-md-3">
            <label class="form-label">Category</label>
            <input
              type="text"
              class="form-control"
              required
              [(ngModel)]="newPromotion.category"
              name="category"
              #category="ngModel"
            />
          </div>

          <div class="col-md-3">
            <label class="form-label">Discount (%)</label>
            <input
              type="number"
              class="form-control"
              required
              min="0.1"
              max="100"
              [(ngModel)]="newPromotion.discountPercentage"
              name="discountPercentage"
              #discount="ngModel"
            />
          </div>

          <div class="col-md-3">
            <label class="form-label">Start Date</label>
            <input
              type="date"
              class="form-control"
              required
              [(ngModel)]="newPromotion.startDate"
              name="startDate"
              #startDate="ngModel"
            />
          </div>

          <div class="col-md-3">
            <label class="form-label">End Date</label>
            <input
              type="date"
              class="form-control"
              required
              [(ngModel)]="newPromotion.endDate"
              name="endDate"
              #endDate="ngModel"
            />
          </div>
        </div>

        <div class="mt-3">
          <button class="btn btn-success" type="submit">
            Create Promotion
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- PROMOTIONS TABLE -->
  <div class="card shadow-sm">
    <div class="card-header bg-secondary text-white">
      <h5>All Promotions</h5>
    </div>
    <div class="card-body">
      <table class="table table-bordered table-hover">
        <thead class="table-light">
          <tr>
            <th>Category</th>
            <th>Discount (%)</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Active</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let promo of promotions">
            <td>{{ promo.category }}</td>
            <td>{{ promo.discountPercentage }}</td>
            <td>{{ promo.startDate | date : "shortDate" }}</td>
            <td>{{ promo.endDate | date : "shortDate" }}</td>
            <td>
              <span
                class="badge"
                [ngClass]="promo.active ? 'bg-success' : 'bg-danger'"
              >
                {{ promo.active ? "Active" : "Stopped" }}
              </span>
            </td>
            <td>
              <!-- 
              <button
                class="btn btn-sm btn-warning me-2"
                *ngIf="promo.active"
                (click)="stopPromotion(promo)"
              >
                Stop
              </button>
              -->

              <button
                class="btn btn-sm btn-danger"
                (click)="deletePromotion(promo)"
              >
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
